<%- include('../Includes/begin.ejs') %>

<link rel="stylesheet" href="../CSS/admin-dashboard.css">

<div class="container-fluid">

    <div id="wrapper">

        <%- include('../Includes/admin_nav.ejs') %>

        <section id="content-wrapper">
            <main role="main" class="pt-5 main">
                <div class="header pb-4 pb-sm-8 pt-5 pt-lg-4 d-flex align-items-center"
                    style="max-height: 100px; background-size: cover; background-position: center top;">
                    <h1>Hello <%= user.name %></h1>
                </div>

                <hr>

                <div class="row">
                    <div class="col-sm-4">
                        <div class="card mb-5" style="box-shadow: 0 1rem 2rem 0 rgba(136, 152, 170, .15) !important;">
                            <img height="250" class="card-img-top"
                                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQtfZsqPh0G49g8UzrQT71pBaBLrErQx4816g&usqp=CAU"
                                alt="image">
                            <div class="card-body">
                                <h5 class="card-title">Manage Staff</h5>
                                <p class="card-text">Manage your staff here. You can edit and
                                    can add or remove a staff. All your changes will be reflected to them as well.
                                </p>
                            </div>
                            <div class="card-footer">
                                <div class="btn-wrapper text-center d-flex justify-content-between"
                                    style="color: #fff;">
                                    <a href="/admin/addStaff" class="btn btn-primary">Add</a>
                                    <a href="/admin/getStaff" class="btn btn-primary">Edit</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="card mb-5" style="box-shadow: 0 1rem 2rem 0 rgba(136, 152, 170, .15) !important;">
                            <img height="250" class="card-img-top"
                                src="https://i.pinimg.com/originals/cb/a9/db/cba9db2b2e83ddaf77e44d69eb6f4b69.png"
                                alt="image">
                            <div class="card-body">
                                <h5 class="card-title">Manage Student</h5>
                                <p class="card-text">Manage your student's profile here (edit/add/remove). All your
                                    changes will be reflected to them as well.
                                </p>

                            </div>
                            <div class="card-footer">
                                <div class="btn-wrapper text-center d-flex justify-content-between"
                                    style="color: #fff;">
                                    <a href="/admin/addStudent" class="btn btn-primary">Add</a>
                                    <a href="/admin/getStudent" class="btn btn-primary">Edit</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="card mb-5" style="box-shadow: 0 1rem 2rem 0 rgba(136, 152, 170, .15) !important;">
                            <img height="250" class="card-img-top"
                                src="https://th.bing.com/th/id/R.b7cf18ce63f0d2c00c2b724cfde9f795?rik=KSuihAR%2b%2fQYSew&pid=ImgRaw&r=0"
                                alt="image">
                            <div class="card-body">
                                <h5 class="card-title">Manage Parent</h5>
                                <p class="card-text">Manage parents's profile here (edit/add/remove). All your
                                    changes will be reflected to them as well.
                                </p>

                            </div>
                            <div class="card-footer">
                                <div class="btn-wrapper text-center d-flex justify-content-between"
                                    style="color: #fff;">
                                    <a href="/admin/addParent" class="btn btn-primary">Add</a>
                                    <a href="/admin/getParent" class="btn btn-primary">Edit</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="card mb-5" style="box-shadow: 0 1rem 2rem 0 rgba(136, 152, 170, .15) !important;">
                            <img height="250" class="card-img-top"
                                src="https://stmarkcatholicparish.files.wordpress.com/2013/01/books.png" alt="image">
                            <div class="card-body">
                                <h5 class="card-title">Manage Courses</h5>
                                <p class="card-text">Manage courses here (edit/add/remove). All your changes will be
                                    reflected in the database.
                                </p>

                            </div>
                            <div class="card-footer">
                                <div class="btn-wrapper text-center d-flex justify-content-between"
                                    style="color: #fff;">
                                    <a href="/admin/addCourse" class="btn btn-primary">Add</a>
                                    <a href="/admin/getCourse" class="btn btn-primary">Edit</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="card mb-5" style="box-shadow: 0 1rem 2rem 0 rgba(136, 152, 170, .15) !important;">
                            <img height="250" class="card-img-top"
                                 src="https://th.bing.com/th/id/R.741da444998d83307d8a6b3d47248af0?rik=s9piyU%2bwD%2fbVzA&pid=ImgRaw&r=0" alt="image">
                            <div class="card-body">
                                <h5 class="card-title">Manage Notices</h5>
                                <p class="card-text">Manage notices here (edit/add/remove). All your changes will be
                                    reflected in the database.
                                </p>

                            </div>
                            <div class="card-footer">
                                <div class="btn-wrapper text-center d-flex justify-content-between"
                                     style="color: #fff;">
                                    <a href="/admin/addNotice" class="btn btn-primary">Add</a></div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <h1 class="mb-5"> Notices </h1>
                <div class="row cards">
                        <% for(notice of notices) { %>
                            <div class="col-sm-4 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h3><%= notice.title %></h3>
                                    </div>
                                    <div class="card-body">
                                        <blockquote class="blockquote mb-0">
                                            <p>   <%= notice.description %></p>
                                            <footer class="blockquote-footer">By<cite title="Source Title">  <%= notice.added_by %> on <%= notice.added_date%> </cite></footer>
                                        </blockquote>
                                        <button class="btn btn-danger mt-3 btn-sm delete" data-doc="<%= notice.n_id %>">Delete</button>
                                    </div>
                                </div>
                            </div>
                        <% } %>
                </div>
                <script>
                    const wrapper= document.querySelector('div.cards');
                    wrapper.addEventListener('click',(e)=>{
                        const trash= document.querySelector('button.delete');
                        console.log("work");
                        const endpoint = `/admin/dashboard/delete/${trash.dataset.doc}`;
                        fetch(endpoint,{
                            method:'DELETE'
                        })
                            .then((response)=>response.json())
                            .then((data)=> window.location.href = data.redirect)
                            .catch(err=>console.log(err));
                    });
                </script>
            </main>
        </section>
    </div>
</div>



<%- include('../Includes/admin_end.ejs') %>
